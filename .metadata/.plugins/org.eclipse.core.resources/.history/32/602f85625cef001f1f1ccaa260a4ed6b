package hibernate.client;

import java.util.List;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.cfg.AnnotationConfiguration;

import hibernate.Account;
import hibernate.Address;
import hibernate.AtmTx;
import hibernate.Car;
import hibernate.ChequeTx;
import hibernate.Customer;
import hibernate.TellerTx;
import hibernate.Tx;

public class hibernateClient {
	public static void main(String [] args) {
		SessionFactory sesFac = new AnnotationConfiguration()
								.addAnnotatedClass(Car.class)
								.addAnnotatedClass(Tx.class)
								.addAnnotatedClass(ChequeTx.class)
								.addAnnotatedClass(TellerTx.class)
								.addAnnotatedClass(AtmTx.class)
								.addAnnotatedClass(Customer.class)
								.addAnnotatedClass(Address.class)
								.addAnnotatedClass(Account.class)
								.buildSessionFactory();
		
		Session ses = sesFac.openSession();
		Transaction tx = ses.beginTransaction();
		
		
		
//		List<Tx> txs = ses.createQuery("from Tx t").list();
//		Account acc = new Account(1000, "SB");
//		ses.save(acc);
//		txs.stream().forEach(t -> acc.addTx(t));
		
//		Customer c = (Customer) ses.load(Customer.class, 1L);
//		System.out.println(c);
//		System.out.println(c.getAddress());
		
//		Customer c = new Customer("Abc", 23, true);
//		ses.save(c);
//		Address a = new Address("Jayanagar", "Blr", 560078);
//		c.setAddress(a);
//		a.setCustomer(c);
//		a.setId(c.getId());
//		ses.saveOrUpdate(a);
		
//		ses.save(new Tx(1000));
//		ses.save(new ChequeTx(2000, 123456));
//		ses.save(new TellerTx(3000, "Admin", "Jayanagar"));
//		ses.save(new AtmTx(4000, 123));
//		
//		List<Tx> txs = ses.createQuery("from Tx t").list();
//		System.out.println(txs);
		
//		save method returns the primary key
//		Long id = (Long)ses.save(new Car(0, "Honda", "City", 2025));
//		System.out.println(id);
//		Car car = (Car) ses.load(Car.class, id);
//		car.setName("civic");
//		Car car1 = (Car) ses.load(Car.class, id);
////		ses.update(car);
//		System.out.println(car.getClass().getName());
//		
		tx.commit();
		ses.close();
		sesFac.close();
	}
}
